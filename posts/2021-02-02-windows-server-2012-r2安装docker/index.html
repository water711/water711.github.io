<!doctype html>
<html lang="en-us">
  <head>
    <title>Windows Server 2012 R2安装docker // 蔡振威的博客</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.107.0">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.9e9c6027c30f5aa9423b581bd9cddd1ddc66088adb9c2604f89eb5828efea5a1.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Windows Server 2012 R2安装docker"/>
<meta name="twitter:description" content="一、下载安装Docker Toolbox https://github.com/docker/toolbox/releases
二、安装Docker Quickstart Terminal 注意：安装完成之后，先不要打开Docker Quickstart Terminal
三、添加环境变量，替换默认docker machine的存储位置 如果不修改，则docker会把镜像默认下载到C盘，导致以后系统盘空间变小
变量名为：MACHINE_STORAGE_PATH
如果已安装了default docker虚拟机，需要先删除原来的，再安装到指定位置。参考这篇文章：https://www.cnblogs.com/ginponson/p/8601320.html
四、打开Docker Quickstart Terminal，初始化环境 Running pre-create checks&hellip; (default) Unable to get the latest Boot2Docker ISO release version: Get https:/ /api.github.com/repos/boot2docker/boot2docker/releases/latest: read tcp 172.16.1 00.4:49835-&gt;192.30.255.117:443: wsarecv: An existing connection was forcibly clo sed by the remote host. Creating machine&hellip; (default) Unable to get the latest Boot2Docker ISO release version: Get https:/ /api.github.com/repos/boot2docker/boot2docker/releases/latest: read tcp 172.16.1 00.4:49836-&gt;192.30.255.117:443: wsarecv: An existing connection was forcibly clo sed by the remote host."/>

    <meta property="og:title" content="Windows Server 2012 R2安装docker" />
<meta property="og:description" content="一、下载安装Docker Toolbox https://github.com/docker/toolbox/releases
二、安装Docker Quickstart Terminal 注意：安装完成之后，先不要打开Docker Quickstart Terminal
三、添加环境变量，替换默认docker machine的存储位置 如果不修改，则docker会把镜像默认下载到C盘，导致以后系统盘空间变小
变量名为：MACHINE_STORAGE_PATH
如果已安装了default docker虚拟机，需要先删除原来的，再安装到指定位置。参考这篇文章：https://www.cnblogs.com/ginponson/p/8601320.html
四、打开Docker Quickstart Terminal，初始化环境 Running pre-create checks&hellip; (default) Unable to get the latest Boot2Docker ISO release version: Get https:/ /api.github.com/repos/boot2docker/boot2docker/releases/latest: read tcp 172.16.1 00.4:49835-&gt;192.30.255.117:443: wsarecv: An existing connection was forcibly clo sed by the remote host. Creating machine&hellip; (default) Unable to get the latest Boot2Docker ISO release version: Get https:/ /api.github.com/repos/boot2docker/boot2docker/releases/latest: read tcp 172.16.1 00.4:49836-&gt;192.30.255.117:443: wsarecv: An existing connection was forcibly clo sed by the remote host." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://water711.github.io/posts/2021-02-02-windows-server-2012-r2%E5%AE%89%E8%A3%85docker/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-02T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-02-02T00:00:00+00:00" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://water711.github.io/"><img class="app-header-avatar" src="/avatar.jpg" alt="John Doe" /></a>
      <span class="app-header-title">蔡振威的博客</span>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc vehicula turpis sit amet elit pretium.</p>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Windows Server 2012 R2安装docker</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Feb 2, 2021
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div>
      </div>
    </header>
    <div class="post-content">
      <p> </p>
<h2 id="一下载安装docker-toolbox">一、下载安装Docker Toolbox</h2>
<p><a href="https://github.com/docker/toolbox/releases">https://github.com/docker/toolbox/releases</a></p>
<h2 id="二安装docker-quickstart-terminal">二、安装Docker Quickstart Terminal</h2>
<p>注意：安装完成之后，先不要打开Docker Quickstart Terminal</p>
<h2 id="三添加环境变量替换默认docker-machine的存储位置">三、添加环境变量，替换默认docker machine的存储位置</h2>
<p>如果不修改，则docker会把镜像默认下载到C盘，导致以后系统盘空间变小</p>
<p>变量名为：MACHINE_STORAGE_PATH</p>
<p><img src="http://hugo.caizhenwei.top//50f2b261bf71904d49fffa4d30214388.png" alt=""></p>
<p>如果已安装了default docker虚拟机，需要先删除原来的，再安装到指定位置。参考这篇文章：<a href="https://www.cnblogs.com/ginponson/p/8601320.html">https://www.cnblogs.com/ginponson/p/8601320.html</a></p>
<h2 id="四打开docker-quickstart-terminal初始化环境">四、打开Docker Quickstart Terminal，初始化环境</h2>
<p>Running pre-create checks&hellip;
(default) Unable to get the latest Boot2Docker ISO release version:  Get https:/
/api.github.com/repos/boot2docker/boot2docker/releases/latest: read tcp 172.16.1
00.4:49835-&gt;192.30.255.117:443: wsarecv: An existing connection was forcibly clo
sed by the remote host.
Creating machine&hellip;
(default) Unable to get the latest Boot2Docker ISO release version:  Get https:/
/api.github.com/repos/boot2docker/boot2docker/releases/latest: read tcp 172.16.1
00.4:49836-&gt;192.30.255.117:443: wsarecv: An existing connection was forcibly clo
sed by the remote host.
(default) Copying C:\Users\Administrator\.docker\machine\cache\boot2docker.iso t
o C:\Users\Administrator\.docker\machine\machines\default\boot2docker.iso&hellip;
(default) Creating VirtualBox VM&hellip;
(default) Creating SSH key&hellip;
(default) Starting the VM&hellip;
(default) Check network to re-create if needed&hellip;
(default) Windows might ask for the permission to create a network adapter. Some
times, such confirmation window is minimized in the taskbar.
(default) Found a new host-only adapter: &ldquo;VirtualBox Host-Only Ethernet Adapter
#2&rdquo;
(default) Windows might ask for the permission to configure a network adapter. S
ometimes, such confirmation window is minimized in the taskbar.
(default) Windows might ask for the permission to configure a dhcp server. Somet
imes, such confirmation window is minimized in the taskbar.
(default) Waiting for an IP&hellip;
Waiting for machine to be running, this may take a few minutes&hellip;
Detecting operating system of created instance&hellip;
Waiting for SSH to be available&hellip;
Detecting the provisioner&hellip;
Provisioning with boot2docker&hellip;
Copying certs to the local machine directory&hellip;
Copying certs to the remote machine&hellip;
Setting Docker configuration on the remote daemon&hellip;
Checking connection to Docker&hellip;
Docker is up and running!
To see how to connect your Docker Client to the Docker Engine running on this virtual machine, run: D:\Program Files (x86)\Docker Toolbox\docker-machine.exe env
default</p>
<pre><code>                    ##         .
              ## ## ##        ==
           ## ## ## ## ##    ===
       /&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;\\\_\_\_/ ===
  ~~~ {~~ ~~~~ ~~~ ~~~~ ~~~ ~ /  ===- ~~~
       \\\_\_\_\_\_\_ o           \_\_/
         \\    \\         \_\_/
          \\\_\_\_\_\\\_\_\_\_\_\_\_/
</code></pre>
<p>docker is configured to use the default machine with IP 192.168.99.100
For help getting started, check out the docs at <a href="https://docs.docker.com">https://docs.docker.com</a></p>
<p>Start interactive shell</p>
<p>PS：启动过程中会下载boot2docker.iso，如果下载速度慢，导致请求超时，需手动下载并移动到以下目录</p>
<p>.\.docker\machine\cache\boot2docker.iso</p>
<h2 id="四配置docker-加速器提高镜像下载速度">四、配置Docker 加速器，提高镜像下载速度</h2>
<p>DaoCloud官方文档：<a href="http://guide.daocloud.io/dcs/daocloud-9153151.html#docker-toolbox">http://guide.daocloud.io/dcs/daocloud-9153151.html#docker-toolbox</a></p>
<p>docker-machine ssh default
sudo sed -i &ldquo;s|EXTRA_ARGS=&rsquo;|EXTRA_ARGS=&rsquo;&ndash;registry-mirror=http://f1361db2.m.daocloud.io |g&rdquo; /var/lib/boot2docker/profile
exit
docker-machine restart default</p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
